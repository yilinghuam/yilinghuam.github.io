<html>
    <head>
        <!-- mapbox map -->
        <link href="https://api.mapbox.com/mapbox-gl-js/v2.3.0/mapbox-gl.css" rel="stylesheet">
        <script src="https://api.mapbox.com/mapbox-gl-js/v2.3.0/mapbox-gl.js"></script>
        <!-- mapbox geocoder -->
        <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"></script>
        <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css" type="text/css">
        <!-- bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Open+Sans&display=swap');
            .geocoder {
                position: relative;
                z-index: 1;
                width: 50%;
                left: 50%;
                margin-left: -25%;
            }
            .mapboxgl-ctrl-geocoder {
                min-width: 100%;
            }
            .tags,.btn { 
                background-color: black;
                color: white;
                border-radius: 0;
            }
            select{
                text-align-last: center;
            }
            body{
                font-family: 'Open Sans', sans-serif;  
            }
        </style>
    </head>
    <body>
        <div class = 'container'>
        <div id="geocoder" class="geocoder row mt-3"></div>

        <div class = 'row mt-3 justify-content-center align-items-center'>
            <div class = 'col-6'>
                <form action="/team_name_url/" method="post">
                    <div class="mb-3">
                        <input type="text" class="form-control" id="placeName" name = 'placeName' >
                    </div>

                    <div class="mb-3">
                        <input type="text" class="form-control" id="coordinates" name = 'coordinates' >
                    </div>

                    <div class="mb-3">
                        <input type="text" class="form-control" id="mrt" name = 'mrt' placeholder="nearest MRT" >
                    </div>

                    <div class = 'mb-3 row justify-content-center align-items-center'>
                        <div class = 'col-4'>
                            <select class="form-control tags">
                                <option selected>RATINGS</option>
                                <option value="1">One</option>
                                <option value="2">Two</option>
                                <option value="3">Three</option>
                                <option value="3">Four</option>
                                <option value="3">Five</option>
                            </select>
                        </div>

                        <div class = 'col-4'>
                            <select class="form-control tags" >
                                <option selected>PRICE</option>
                                <option value="1">$</option>
                                <option value="2">$$</option>
                                <option value="3">$$$</option>
                                <option value="4">$$$$</option>
                                <option value="5">$$$$$</option>
                            </select>
                        </div>

                        <div class = 'col-4'>
                            <select class="form-control tags" >
                                <option selected>CATEGORY</option>
                                <option value="Cafe">CAFE</option>
                                <option value="Chinese">CHINESE</option>
                                <option value="Dessert">DESSERT</option>
                                <option value="English">ENGLISH</option>
                                <option value="Fast food">FAST FOOD</option>
                                <option value="French">FRENCH</option>
                                <option value="Halal">HALAL</option>
                                <option value="Italian">ITALIAN</option>
                                <option value="Japanese">JAPANESE</option>
                                <option value="Mexican">MEXICAN</option>
                                <option value="Spanish">SPANISH</option>
                                <option value="Vietnamese">VIETNAMESE</option>
                            </select>
                        </div>
                    </div>

                    <div class="mb-3">
                        <textarea class="form-control" id="comments" rows="3" name='comments' placeholder="Comments"></textarea>
                    </div>

                    <div class = 'mb-3 text-center'>
                            <button type="submit" class="btn btn-primary">SUBMIT</button>
                    </div>
                </form>
            </div>
        </div>
        </div>

        <script>
            mapboxgl.accessToken = 'pk.eyJ1IjoibGluZ3k5MyIsImEiOiJja3BjaGRoZzQwa3lzMm5ycjhyb3pueWw1In0.7n_IOkfepwaa6IkpFO2MiA';

            var geocoder = new MapboxGeocoder({
                accessToken: mapboxgl.accessToken,
                countries: 'sg',
            });
            
            document.getElementById('geocoder').appendChild(geocoder.onAdd());

            // retrieve geocode results
                geocoder.on('result', function({ result }) { 
                document.getElementById('coordinates').value = result.geometry.coordinates;
                document.getElementById('placeName').value = result.place_name;
                // centre or geometry coordinates?
                console.log(typeof document.getElementById('coordinates').value)
                console.log(result)
            })
            

        </script>
    </body>
</html>